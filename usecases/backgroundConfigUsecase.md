# Ρύθμιση συστήματος εναλλαγής desktop background

| Actor | Precondition |
| --- | :---: |
| Χρήστης | Είναι διαθέσιμη τουλάχιστον μια συλλογή φόντων |

Notes

:	To πρόγραμμα όσο λειτουργεί αλλάζει το φόντο της επιφάνειας εργασείας με μια καθορισμένη συχνότητα.
Το καινούριο φόντο επιλέγεται τυχαία από μια από τις εγκαταστιμένες συλλογές της συσκεύης.
Η συλλογή από την οποία επιλέγεται το νέο φόντο επίλεγεται με πιθανότητα ανάλογη του βάρους επιλογής, που εξαρτάται από τους κανόνες εμφάνισης.

<!-- H epexhghsh den einai arketa katanohsimh -->

1. Ο χρήστης πηγαίνει στις ρυθμίσεις εναλλαγής φόντων

1. Του εμφανίζονται ολες οι συλλογές φόντων που είναι εγκαταστιμένες στη συσκευή
Σε κάθε συλλογή αναφέρεται το παρόν βάρος επιλογής της. 
	1. Οι συλλογές εχούν αλλάξει θέση ή αλλιώς δεν μπορούν να βρεθούν
	1. Το σύστημα αποθηκεύει τα δεδομένα λειτουργίας, τα κανει log σε τοπικό crash log
και τα στέλνει μέσω τηλεμετρίας στα κέντρικα server της εφαρμογής
	1. Το πρόγραμμα κλείνει και εμφανίζεται το crash log

1. Τροποποιεί την συχνότητα εναλλαγής φόντων
	1.  Η συχνότητα που εισαγάγει είναι μικρότερη των 10 δευτερολέπτων
	1.  Η συχνότητα αλλάζει σε 10 δευτερολέπτα
	1.  Συνεχίζει η κανονική ροή
	
	a. Εναλακτικά την αφήνει κενή
	a. Η συχνότητα θέτεται στη default τιμή 2 λεπτών

1. Επιλέγει μια συλλογή για να επεξεργαστεί τους κανόνες εμφάνησης της

1. Το σύστημα φορτώνει το config file που αντιστοίχει στη συλλογή
	1. Δεν βρίσκεται αντίστοιχο config file ή δεν περνάει τον έλέγχο validity
	1. Ο χρήστης ειδοποιείται
	1. Δημιουργείται καινούριο αρχείο που δεν περιέχει κανένα κανόνα
	1. Το νέο config file φορτώνεται και συνεχίζεται η κανονική ροή

1. Του εμφανίζονται οι κανόνες της συλλογής και τα βάρη καθενός. Το βάρος τη συλλογής είναι το άθροισμα των βαρών των κανόνων

1. Ο χρήστης προσθέτει νέο κανόνα εμφάνησης 
	1. Ο αριθμός κανόνων που περιέχει η συλλογή βρίσκεται στο μέγιστο επιτρεπτό όριο
		1. Ανιχνέυται ότι ο χρήστης είναι συνδρομητής της πληρωμένης υπηρεσίας
		1. Ο κανόνας προστίθεται και η ροή συνεχίζεται κανονικά
	1. Δεν προστίθεται καινούριος κανόνας
	1. Η ροή συνεχίζεται

1. Επιλέγει το condition του κανόνα. Condition είναι μια μεταβλητή η οποία χρησιμοποιείται για τον καθορισμό του βάρους.
Παράδειγμα η μέρα της εβδομάδας ή ο καιρός
	1. Αν απαιτείται από το είδος του condition εμφανήζεται στο χρήστη να εισαγάγει μία επιπλέον τιμή modifier στο condition πχ σε ποιά μέρα της εβδομάδας θα αυξάνεται το βάρος
	1. Ο χρήστης εισαγάγει την τιμή και η ροή συνεχίζεται.
		1. Αγνοεί την τιμή
		1. Ο κανόνας θα έχει πάντα βάρος 0
		1. Η ροή συνεχίζεται

1. Επιλέγει τον πολλαπλασιάστη του κανόνα 
	1. Εισαγάγεται τιμή πέρα από το αποδεκτό όριο
	1. Ο πολλαπλασιάστης θέτεται στο μέγιστο όριο

	a. Δεν εισαγάγει τιμή για το πολλαπλασιάστη
	a. Ο πολλαπλασιάστης θέτεται στο 0

1. Αποθηκεύει τον κανόνα. Το config file ενημερώνεται και το βάρος της συλλογής ανανεώνεται
	1. Ακυρώνει τις αλλαγές στον κανόνα
	1. Το config file παραμένει ως έχει
	1. Η ροή επιστρέφει στο βήμα 5.

	a. Το νέο βάρος δεν μπορεί να υπολογιστεί λόγω προβλήματος με το condition
	a. Το αρχείο ενημερώνεται αλλά το βάρος τίθεται στο 0
	a. Η ροή επιστρέφει στο βήμα 5.

1. Η ροή επιστρέφει στο βήμα 2.
